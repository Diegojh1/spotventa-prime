-- Check and update the category constraint
ALTER TABLE public.properties DROP CONSTRAINT IF EXISTS properties_category_check;
ALTER TABLE public.properties ADD CONSTRAINT properties_category_check CHECK (category IN ('sale', 'rent'));

-- Insert sample properties with correct category values
INSERT INTO public.properties (
  title, price, category, property_type, bedrooms, bathrooms, area_m2,
  address, city, country, latitude, longitude, images, features, description,
  year_built, parking_spaces, energy_rating, is_featured, is_active,
  contact_name, contact_email, contact_phone
) VALUES
-- Featured Properties
(
  'Chalet pareado en Casa de Campo, Madrid',
  1400000,
  'sale',
  'house',
  4,
  3,
  147,
  'Calle de los Manzanares, 45',
  'Madrid',
  'España',
  40.4168,
  -3.7038,
  '["https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800", "https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800", "https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800"]'::jsonb,
  '["Terraza", "Jardín privado", "Chimenea", "Aire acondicionado", "Calefacción central"]'::jsonb,
  'Exclusivo chalet pareado en la prestigiosa zona de Casa de Campo. Distribuido en tres plantas, cuenta con amplias estancias, jardín privado y excelentes acabados.',
  2018,
  2,
  'A',
  true,
  true,
  'Gilmar Madrid Rio',
  'madrid@gilmar.es',
  '+34 914 567 890'
),
(
  'Apartamento moderno en Salamanca',
  950000,
  'sale',
  'apartment',
  3,
  2,
  120,
  'Calle Serrano, 78',
  'Madrid',
  'España',
  40.4268,
  -3.6768,
  '["https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800", "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800"]'::jsonb,
  '["Portero físico", "Ascensor", "Aire acondicionado", "Calefacción individual", "Balcón"]'::jsonb,
  'Elegante apartamento en el exclusivo barrio de Salamanca. Totalmente reformado con materiales de alta calidad.',
  2020,
  1,
  'B',
  true,
  true,
  'Engel & Völkers',
  'salamanca@engelvoelkers.com',
  '+34 915 678 901'
),
(
  'Ático con terraza en Barcelona',
  1200000,
  'sale',
  'penthouse',
  3,
  2,
  110,
  'Passeig de Gràcia, 92',
  'Barcelona',
  'España',
  41.3851,
  2.1734,
  '["https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=800", "https://images.unsplash.com/photo-1600566752355-35792bedcfea?w=800"]'::jsonb,
  '["Terraza 50m²", "Vistas panorámicas", "Jacuzzi", "Aire acondicionado", "Suelos de parquet"]'::jsonb,
  'Espectacular ático en Passeig de Gràcia con terraza de 50m² y vistas panorámicas a la ciudad.',
  2019,
  0,
  'A',
  true,
  true,
  'Coldwell Banker',
  'barcelona@coldwellbanker.es',
  '+34 934 567 890'
),
(
  'Casa unifamiliar en Valencia',
  680000,
  'sale',
  'house',
  5,
  3,
  200,
  'Calle de la Paz, 156',
  'Valencia',
  'España',
  39.4699,
  -0.3763,
  '["https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800", "https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=800"]'::jsonb,
  '["Piscina", "Jardín", "Barbacoa", "Garaje", "Trastero"]'::jsonb,
  'Magnífica casa unifamiliar con piscina y jardín en zona residencial de Valencia.',
  2015,
  2,
  'B',
  true,
  true,
  'RE/MAX Valencia',
  'valencia@remax.es',
  '+34 963 456 789'
),
-- Regular Properties
(
  'Piso en alquiler - Malasaña',
  1800,
  'rent',
  'apartment',
  2,
  1,
  75,
  'Calle del Espíritu Santo, 23',
  'Madrid',
  'España',
  40.4254,
  -3.7038,
  '["https://images.unsplash.com/photo-1493809842364-78817add7ffb?w=800"]'::jsonb,
  '["Totalmente amueblado", "Aire acondicionado", "Internet incluido"]'::jsonb,
  'Acogedor piso en el vibrante barrio de Malasaña, totalmente amueblado y listo para entrar.',
  1995,
  0,
  'C',
  false,
  true,
  'María García',
  'maria.garcia@email.com',
  '+34 666 123 456'
),
(
  'Estudio cerca de la Universidad',
  850,
  'rent',
  'studio',
  0,
  1,
  35,
  'Calle de Fuencarral, 89',
  'Madrid',
  'España',
  40.4254,
  -3.7038,
  '["https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800"]'::jsonb,
  '["Amueblado", "Calefacción", "Ascensor"]'::jsonb,
  'Perfecto estudio para estudiantes, cerca de varias universidades y con excelentes conexiones de transporte.',
  1980,
  0,
  'D',
  false,
  true,
  'Pedro Estudiantes SL',
  'info@pedroestudiantes.com',
  '+34 677 234 567'
),
(
  'Oficina en distrito financiero',
  3200,
  'rent',
  'office',
  0,
  2,
  85,
  'Paseo de la Castellana, 200',
  'Madrid',
  'España',
  40.4568,
  -3.6898,
  '["https://images.unsplash.com/photo-1497366216548-37526070297c?w=800"]'::jsonb,
  '["Mobiliario incluido", "Sala de reuniones", "Recepción", "Parking"]'::jsonb,
  'Moderna oficina en el distrito financiero de Madrid, completamente equipada y lista para usar.',
  2010,
  1,
  'B',
  false,
  true,
  'Oficinas Prime',
  'comercial@oficinasprime.es',
  '+34 915 789 012'
),
(
  'Apartamento junto al mar - Valencia',
  2100,
  'rent',
  'apartment',
  3,
  2,
  95,
  'Paseo Marítimo, 45',
  'Valencia',
  'España',
  39.4569,
  -0.3518,
  '["https://images.unsplash.com/photo-1571896349842-33c89424de2d?w=800"]'::jsonb,
  '["Vistas al mar", "Terraza", "Piscina comunitaria", "Aire acondicionado"]'::jsonb,
  'Precioso apartamento con vistas al mar Mediterráneo, ideal para disfrutar del clima valenciano.',
  2005,
  1,
  'B',
  false,
  true,
  'Costa Levante',
  'valencia@costalevante.es',
  '+34 963 789 123'
);